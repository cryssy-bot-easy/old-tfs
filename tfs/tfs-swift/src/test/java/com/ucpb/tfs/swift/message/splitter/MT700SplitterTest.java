package com.ucpb.tfs.swift.message.splitter;

import com.ucpb.tfs.swift.message.ApplicationHeader;
import com.ucpb.tfs.swift.message.BasicHeader;
import com.ucpb.tfs.swift.message.MessageBlock;
import com.ucpb.tfs.swift.message.RawSwiftMessage;
import com.ucpb.tfs.swift.message.Tag;

import org.junit.Ignore;
import org.junit.Test;

import java.util.List;

import static junit.framework.Assert.assertEquals;
import static junit.framework.Assert.assertNotNull;
import static junit.framework.Assert.assertNull;

/**
 */
public class MT700SplitterTest {

    private MT700Splitter splitter = new MT700Splitter();


    @Test
    public void splitMessage(){
        RawSwiftMessage mt700 = new RawSwiftMessage();
        mt700.addTag("46A",":+SIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLE<BR>SIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLE<BR>SIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLESIGNED COMMERCIAL INVOICE [TRIPLICATE] QUADRUPLE\n" +
                "+AIRWAY BILL ADDRESSED TO UNITED COCONUT PLANTERS BANK, MANILA, MARKED FREIGHT ( ) PREPAID / ( ) COLLECT NOTIFY [  ]\n" +
                "+BENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYERBENEFICIARY'S CERTIFICATE THAT COPY OF COMMERCIAL INVOICE, PACKING LIST AND  ONE FULL SET OF NON-NEGOTIABLE SHIPPING DOCUMENTS HAVE BEEN COURIERED DIRECTLY TO BUYER\n" +
                "+INSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGO<BR>INSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANCE POLICY OR CERTIFICATE IN DUPLICATE ENDORSED IN BLANK WITH CLAIMS PAYABLE IN PHILIPPINES FOR 110 PERCENT OF COMMERCIAL INVOICE VALUE COVERING INSTITUTE CARGOINSURANC\n" +
                "+PACKING LIST\n" +
                "+ONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKED<BR>ONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAN \"ON BOARD\" OCEAN BILL OF LADING AND ONE NON-NEGOTIABLE COPY ISSUED TO THE ORDER OF UNITED COCONUT PLANTERS BANK MARKEDONE FULL SET OF AT LEAST THREE ORIGINAL CLEAR COPIES");
        assertNotNull(mt700.getMessageBlock().getTagByName("46A"));
        List<RawSwiftMessage> messages = splitter.split(mt700);
        assertEquals(2,messages.size());
        RawSwiftMessage splitMT700 = messages.get(0);
        assertNotNull(splitMT700.getMessageBlock().getTagByName("46A"));
        assertEquals(splitter.messageLimit(),messages.get(0).getMessageBlock().getTagByName("46A").getValue().length());
        assertNotNull(messages.get(1).getMessageBlock().getTagByName("46B"));
    }
}
