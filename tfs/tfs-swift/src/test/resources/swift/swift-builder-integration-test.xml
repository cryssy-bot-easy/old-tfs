<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <import resource="classpath:swift/builders/mt103.xml"/>
    <import resource="classpath:swift/builders/mt202.xml"/>
    <import resource="classpath:swift/builders/mt700.xml"/>
    <import resource="classpath:swift/builders/mt707.xml"/>
    <import resource="classpath:swift/builders/mt740.xml"/>
    <import resource="classpath:swift/builders/mt747.xml"/>
    <import resource="classpath:swift/builders/mt750.xml"/>
    <import resource="classpath:swift/builders/mt760.xml"/>
    <import resource="classpath:swift/builders/mt767.xml"/>
    <import resource="classpath:swift/builders/mt799.xml"/>


    <bean id="swiftMessageBuilder" class="com.ucpb.tfs.swift.message.builder.SwiftMessageBuilder">
        <property name="builders">
            <list>
                <bean id="applicationHeaderBuilder" class="com.ucpb.tfs.swift.message.builder.SpelEvaluatingApplicationHeaderBuilder">
                    <constructor-arg name="headerMapping">
                        <map>
                            <entry value="ioIdentifier" key="'${swift.io.identifier}'"/>
                            <!--<entry key="applicationHeader.messageType" value="#this.get('messageType')"/>-->
                            <!--<entry value="receiverAddress" key="'XXXX'"/>-->
                            <entry value="messagePriority" key="'${swift.message.priority}'"/>
                            <entry value="deliveryMonitoring" key="'${swift.delivery.monitoring}'"/>
                            <entry value="obsolescencePeriod" key="'${swift.obsolence.period}'"/>
                        </map>
                    </constructor-arg>
                </bean>
                <bean id="basicHeaderBuilder" class="com.ucpb.tfs.swift.message.builder.SpelEvaluatingBasicHeaderBuilder">
                    <constructor-arg name="mapping">
                        <map>
                            <entry value="applicationIdentifier" key="'${swift.app.identifier}'"/>
                            <entry value="serviceIndentifier" key="'${swift.service.identifier}'"/>
                            <entry value="ltIdentifier" key="'${swift.lt.identifier}'"/>
                            <entry value="sessionNumber" key="'${swift.session.number}'"/>
                            <entry value="sequenceNumber" key="'${swift.sequence.number}'"/>
                        </map>
                    </constructor-arg>
                </bean>
                <bean class="com.ucpb.tfs.swift.message.builder.MessageBlockFactory">
                    <constructor-arg name="builders">
                        <map>
                            <entry key="103" value-ref="mt103Mapper"/>
                            <entry key="202" value-ref="mt202Mapper"/>
                            <entry key="700" value-ref="mt700Mapper"/>
                            <entry key="760" value-ref="mt760Mapper"/>
                        </map>
                    </constructor-arg>
                </bean>
                <bean class="com.ucpb.tfs.swift.message.builder.SpelEvaluatingUserHeaderBuilder" >
                    <constructor-arg name="headerMappings">
                        <map>
                            <entry key="700">
                                <map>
                                    <entry key="43" value="'THIS IS A MESSAGE'"/>
                                    <entry key="119" value="'STP'"/>
                                </map>
                            </entry>
                            <entry key="760">
                                <map>
                                    <entry key="27" value="'THIS IS A MESSAGE'"/>
                                    <entry key="20" value="'STP'"/>
                                    <entry key="23" value="'STP'"/>
                                    <entry key="23" value="'STP'"/>
                                    <entry key="40" value="'STP'"/>
                                    <entry key="77C" value="'STP'"/>
                                </map>
                            </entry>
                        </map>
                    </constructor-arg>
                </bean>
            </list>
        </property>
        <property name="destinationMapping">
            <map>
                <entry key="700" value="#this.get('destinationBank')"/>
                <entry key="760" value="#this.get('destinationBank')"/>
            </map>
        </property>
        <property name="splitterFactory" ref="splitter"/>
    </bean>

    <bean id="splitter" class="com.ucpb.tfs.swift.message.splitter.SplitterFactory">
        <constructor-arg name="registry">
            <util:map>
                <entry key="com.ucpb.tfs.swift.message.mt7series.MT700"
                       value="com.ucpb.tfs.swift.message.splitter.MT700Splitter"/>
            </util:map>
        </constructor-arg>
    </bean>

</beans>